write.csv(temp,"merge.csv",quote=FALSE)
wc(dtEDU)
dim(dtEDU)
temp <- select(arrange(dtMERGE,desc(CountryCode)),CountryCode, Country, Long.Name, rankingGDP, GDP)
temp <- select(arrange(dtMERGE,desc(CountryCode)),CountryCode, Long.Name.x, rankingGDP, GDP)
temp <- select(arrange(dtMERGE,desc(rankingGDP)),CountryCode, Long.Name.x, rankingGDP, GDP)
head(temp)
temp[13,]
write.csv(temp,"temp.csv",quote=FALSE)
dtMERGE$rankingGDP
dim(dtGDP)
dtGDP$rankingGDP
?read.csv
as.numeric(dtGDP$rankingGDP)
head(dtGDP)
dtGDP <- data.table(read.csv(f,skip=5,header=FALSE,nrows=215))
dim(dtGDP)
head(dtGDP)
dtGDP <- filter(dtGDP,V1!="")
dtGDP <- filter(dtGDP,V2!="")
dtGDP <- select(dtGDP,V1,V2,V4,V5)
names(dtGDP) <- c("CountryCode","rankingGDP","Long.Name","GDP")
dim(dtGDP)
dtGDP$rankingGDP
url <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv"
f <- file.path(getwd(), "education.csv")
download.file(url,f)
dtEDU <- data.table(read.csv(f))
dtMERGE <- merge(dtGDP,dtEDU,all=TRUE, by=c("CountryCode"))
dim(dtMERGE)
dim(dtGDP)
select(arrange(dtMERGE,desc(rankingGDP)),CountryCode, Long.Name.x, rankingGDP, GDP)[13,]
dtMERGE$rankingGDP
unique(dtMERGE$rankingGDP)
!is.na(dtMERGE$rankingGDP)
sum(!is.na(dtMERGE$rankingGDP))
sum(!is.na(unique(dtMERGE$rankingGDP))
)
dim(dtMERGE)
sort(dtGDP$rankingGDP)
sort(dtMERGE$rankingGDP)
dim(dtMERGE)
dtMERGE$rankingGDP
temp <- select(arrange(dtMERGE,desc(rankingGDP)),CountryCode, Long.Name.x, rankingGDP, GDP)
write.csv(temp,"temp.csv",quote=FALSE)
sum(!is.na(unique(dtMERGE$rankingGDP)))
sum(!is.na(dtMERGE$rankingGDP))
names(dtMERGE)
dtMERGE$Income.Group
levels(dtMERGE$Income.Group)
dtMERGE[,mean(rankingGDP,rm.na=TRUE), by=Income.Group]
is.data.table(dtMERGE)
is.data.frame(dtMERGE)
?summarize
summarise(group_by(dtMERGE, Income.Group),mean(rankingGDP,na.rm=TRUE))
?cut
?cut2
library(Himse)
install.package("Hmise")
install.package("Hmisc")
install.packages("Hmisc")
library("Himsc")
library(Hmisc)
dtMERGE$GDPgroup <- cut2(dtMERGE$rankingGDP,g=4)
dtMERGE$GDPgroup
factor(dtMERGE$GDPgroup)
?cut2
dtMERGE$GDPgroup <- cut2(dtMERGE$rankingGDP,g=5)
factor(dtMERGE$GDPgroup)
xtabs(GDPgroup~Income.Group, data=dtMERGE)
xtabs(Freq~GDPgroup + Income.Group, data=dtMERGE)
?xtabs
xtabs( ~GDPgroup + Income.Group, data=dtMERGE)
url <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv"
f <- file.path(getwd(),"FGDP.csv")
download.file(url,f)
dtGDP <- data.table(read.csv(f,skip=5,header=FALSE,nrows=215))
dtGDP <- filter(dtGDP,V1!="")  # CountryCode is not empty
dtGDP <- filter(dtGDP,V2!="")  # GDP ranking is not empty
dtGDP <- select(dtGDP,V1,V2,V4,V5)
names(dtGDP) <- c("CountryCode","rankingGDP","Long.Name","GDP")
url <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv"
f <- file.path(getwd(), "education.csv")
download.file(url,f)
dtEDU <- data.table(read.csv(f))
dtMERGE <- merge(dtGDP,dtEDU,all=TRUE, by=c("CountryCode"))
dim(dtMERGE)
temp <- select(arrange(dtMERGE,desc(rankingGDP)),CountryCode, Long.Name.x, rankingGDP, GDP)
write.csv(temp,"temp.csv",quote=FALSE)
?strsplit
splitnames <- strsplit(names(data),"wgtp")
length(splitnames)
splitnames[123]
getwd()
setwd("/Users/lanjblue/Documents/Work_Lan/R/coursera/Getting-and-Cleaning-Data/Quiz4")
url <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv"
f <- file.path(getwd(),"FGDP.csv")
download.file(url,f)
dtGDP <- data.table(read.csv(f,skip=5,header=FALSE,nrows=215))
dtGDP <- filter(dtGDP,V1!="")  # CountryCode is not empty
dtGDP <- filter(dtGDP,V2!="")  # GDP ranking is not empty
dtGDP <- select(dtGDP,V1,V2,V4,V5)
names(dtGDP) <- c("CountryCode","rankingGDP","Long.Name","GDP")
head(dtGDP)
mean(dtGDP$GDP)
as.numeric(dtGDP$GDP)
dtGDP$GDP
dim(dtGDP)
gdpnum <- sub(",","",dtGDP$GDP)
head(gdpnum)
gdpnum <- gsub(",","",dtGDP$GDP)
head(gdpnum)
as.numeric(gdpnum)
gdpnum <- as.numeric(gsub(",","",dtGDP$GDP))
mean(gdpnum)
names(dtGDP) <- c("CountryCode","rankingGDP","countryNames","GDP")
gdpnum <- as.numeric(gsub(",","",dtGDP$GDP))
mean(gdpnum)
head(dtGDP)
grep("^United",countryNames), 4
grep("^United",countryNames)
grep("^United",dtGDP$countryNames)
grep("^United",dtGDP$countryNames)
length(grep("^United",dtGDP$countryNames))
url <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv"
f <- file.path(getwd(),"FGDP.csv")
download.file(url,f)
dtGDP <- data.table(read.csv(f,skip=5,header=FALSE,nrows=215))
dtGDP <- filter(dtGDP,V1!="")  # CountryCode is not empty
dtGDP <- filter(dtGDP,V2!="")  # GDP ranking is not empty
dtGDP <- select(dtGDP,V1,V2,V4,V5)
names(dtGDP) <- c("CountryCode","rankingGDP","Long.Name","GDP")
url <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv"
f <- file.path(getwd(), "education.csv")
download.file(url,f)
dtEDU <- data.table(read.csv(f))
dtMERGE <- merge(dtGDP,dtEDU,all=TRUE, by=c("CountryCode"))
dim(dtMERGE)
names(dtMERGE)
dtMERGE$Special.Notes
grep("fiscal year end", dtMERGE$Special.Notes)
grep("[Ff]iscal year end", dtMERGE$Special.Notes)
grep("[Ff]iscal year end.*[Jj]une", dtMERGE$Special.Notes)
length(grep("[Ff]iscal year end.*[Jj]une", dtMERGE$Special.Notes))
dtMERGE$Special.Notes[11]
dtMERGE$Special.Notes[18]
dtMERGE$Special.Notes[31]
dtMERGE$Special.Notes[33]
library(quantmod)
amzn = getSymbols("AMZN",auto.assign=FALSE)
sampleTimes = index(amzn)
load.packages("quantmod")
install.packages("quantmod")
library(quantmod)
amzn = getSymbols("AMZN",auto.assign=FALSE)
sampleTimes = index(amzn)
head(amzn)
sampleTimes
head(amzn)
head(amzn[,1])
head(index(amzn))
grep("2012",sampleTimes)
length(grep("2012",sampleTimes))
wday(sampleTimes[1])
sampleTimes[1]
sampleTimes[2]
wday(sampleTimes[2])
wday(sampleTimes[3])
wday(sampleTimes[4])
wday(sampleTimes[5])
?wday
weekdays(sampleTimes[2])
mondays <- function(x) {weekdays(x)}
sapply(sampleTimes,mondays)
sapply(sampleTimes, weekdays(sampleTimes)=="Monday")
sampleTimes[sapply(sampleTimes,mondays)=="Monday"]
length(sampleTimes[sapply(sampleTimes,mondays)=="Monday"])
amzn2012 <- grep("2012",sampleTimes)
length(sampleTimes[sapply(amzn2012,mondays)=="Monday"])
length(amzn2012)
head(amzn2012)
amzn2012 <- sampleTimes[grep("2012",sampleTimes)]
length(amzn2012)
head(amzn2012)
wkdys <- function(x) {weekdays(x)}
length(sampleTimes[sapply(amzn2012,wkdys)=="Monday"])
length(amzn2012[sapply(amzn2012,wkdys)=="Monday"])
setwd("/Users/lanjblue/Documents/Work_Lan/R/coursera/Getting-and-Cleaning-Data/Project")
url <- "https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip"
temp <- tempfile()
download.file("https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip",temp)
data <- read.table(unz(temp, "a1.dat"))
unlink(temp)
url <- "https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip"
download(url, dest="dataset.zip", mode="wb")
download.file(url, dest="dataset.zip", mode="wb")
unzip ("dataset.zip", exdir = "./")
temp <- tempfile()
download.file(url, dest=temp, mode="wb")
unzip (temp, exdir = "./")
unlink(temp)
temp <- read.table("train/X_train.txt")
pwd
getwd
getwd
getwd()
temp <- read.table("UCI HAR Dataset/train/X_train.txt")
temp <- data.table(read.table("UCI HAR Dataset/train/X_train.txt"))
dim(temp)
temp[1:4,1:4]
?fread
subjectTrain <- fread(file.path(path, "train", "subject_train.txt"))
subjectTest <- fred(file.path(path,"test","subject_test.txt"))
path <- getwd()
subjectTrain <- fread(file.path(path, "train", "subject_train.txt"))
subjectTest <- fred(file.path(path,"test","subject_test.txt"))
subjectTrain <- fread(file.path(path, "train", "subject_train.txt"))
subjectTest <- fread(file.path(path,"test","subject_test.txt"))
file.path(path, "train", "subject_train.txt")
subjectTrain <- fread(file.path(path, "train", "subject_train.txt"))
getwd()
subjectTrain <- fread(file.path(path, "UCI HAR Dataset/train", "subject_train.txt"))
subjectTest <- fread(file.path(path,"UCI HAR Dataset/test","subject_test.txt"))
length(subjectTest)
dim(subjectTest)
dim(subjectTrain)
activityTrain <- fread(file.path(path, "UCI HAR Dataset/train", "X_train.txt"))
dim(activityTrain)
activityTest <- fread(file.path(path,"UCI HAR Dataset/test","X_test.txt"))
dim(activityTest)
labelTrain <- fread(file.path(path, "UCI HAR Dataset/train", "y_train.txt"))
labelTest <- fread(file.path(path,"UCI HAR Dataset/test","y_test.txt"))
activityTrain <- fread(file.path(path, "UCI HAR Dataset/train", "X_train.txt"))
activityTest <- fread(file.path(path,"UCI HAR Dataset/test","X_test.txt"))
dim(labelTrain)
is.data.table(activityTrain)
is.data.table(activityTest)
feature <- read.table("features.txt")
getwd
feature <- read.table("UCI HAR Dataset/features.txt")
dim(feature)
head(feature)
temp <- grep(".*mean\(\)",feature)
temp <- grep(".*mean()",feature)
dim(temp)
head(temp)
temp
temp <- grep(".*mean ",feature)
head(temp)
temp <- greb("mean",feature)
?greb
temp <- grep("mean",feature)
head(temp)
grep("mean",feature)
head(feature)
grep("mean",feature$V2)
temp <- grep("mean",feature$V2)
head(temp)
length(temp)
?read.table
activityTrain <- data.table(read.table(file.path(path, "UCI HAR Dataset/train", "X_train.txt")),
colClasses=temp)
)
))
(0
)
activityTrain <- data.table(read.table(file.path(path, "UCI HAR Dataset/train", "X_train.txt")), colClasses=temp)
dim(activityTest)
length(feature)
dim(feature)
length(temp)
activityTrain <- data.table(read.table(file.path(path, "UCI HAR Dataset/train", "X_train.txt"),colClasses=temp))
temp
dim(temp)
length(temp)
is.vector(temp)
dim(activityTest)
?fread
head(subjectTrain)
length(subjectTest)
dim(subjectTest)
temp <- rbind(subjectTrain, subjectTest)
dim(temp)
dim(labelTrain)
subject <- rbind(subjectTrain, subjectTest)
label <- rbind(labelTrain, labelTest)
activity <- rbind(activityTrain, activityTest)
dim(activityTrain)
dim(activityTest)
activityTrain <- fread(file.path(path, "UCI HAR Dataset/train", "X_train.txt"))
activityTest <- fread(file.path(path,"UCI HAR Dataset/test","X_test.txt"))
dim(activityTrain)
dim(activityTest)
subject <- rbind(subjectTrain, subjectTest)
label <- rbind(labelTrain, labelTest)
activity <- rbind(activityTrain, activityTest)
dim(subject)
dim(label)
dim(activity)
dt <- cbind(subject, label, activity)
dim(dt)
head(subject)
?setnames
?names
subject <- rbind(subjectTrain, subjectTest)
names(subject) <- c("V", "subject")
label <- rbind(labelTrain, labelTest)
names(label) <- c("V", "label")
names(subject)
subject <- rbind(subjectTrain, subjectTest)
names(subject) <- "subject"
label <- rbind(labelTrain, labelTest)
names(label) <- "label"
activity <- rbind(activityTrain, activityTest)
head(subject)
head(label)
dt <- cbind(subject, label, activity)
dim(dt)
setkey(dt, subject, label)
feature <- fread(file.path(path, "UCI HAR Dataset/", "features.txt"))
dim(feature)
head(feature)
names(feature) <- c("num", "name")
head(feature)
dim(dt)
dt[1:3]
dt[1:3,1:3]
head(names(dt))
subset <- dt[grepl("mean|std", name)]
subset <- feature[grepl("mean|std", name)]
dim(subject)
dim(subset)
temp <- feature[grepl("mean\\(\\)|std\\(\\)", name)]
dim(temp)
head(subset)
head(temp)
subset
subset <- feature[grepl("mean\(\)|std", name)]
subset <- feature[grepl("mean\(\)|std", name)]
subset <- feature[grepl("mean\\(\\)|std", name)]
dim(subset)
subset
feature$code <- feature[, paste0("V", num)]
head(feature)
feature <- fread(file.path(path, "UCI HAR Dataset/", "features.txt"))
names(feature) <- c("num", "name")
subset$code <- subset[, paste0("V", num)]
head(subset)
dim(subset)
subset
names(dt)
dtsub <- select(dt, feature$code)
dtsub <- dt[,feature$code]
dim(dtsub)
head(feature$code)
feature$code <- feature[, paste0("V", num)]
head(feature$code)
head(feature)
dtsub <- select(dt,feature$code)
dtsub <- dt[,feature$code]
dim(dtsub)
dtsub <- subset(dt, select=feature$code)
dim(dtsub)
subset <- feature[grepl("mean\\(\\)|std", name)]
dim(subset)
subset$code <- subset[, paste0("V", num)]
subset
dtsub <- subset(dt,subset$code)
dtsub <- subset(dt, select=subset$code)
dim(dtsub)
temp<- c(key(dt), subset$code)
dim(temp)
length(temp)
head(temp)
code2 <- c(key(dt), subset$code)
dtsub <- subset(dt, select=code2)
dim(dtsub)
head(dtsub[1:4,1:5])
dim(dtsub)
dtsub[1:4,1:5])
dtsub[1:4,1:5]
head(dtsub[,1:5])
head(dtsub[,1:5], n=10)
head(dtsub)
dim(dtsub)
selection <- c(key(dt), subset$code)
dtsub <- subset(dt, select=selection)
dim(dtsub)
activitylabelTrain <- fread(file.path(path, "UCI HAR Dataset/train", "y_train.txt"))
activitylabelTest <- fread(file.path(path,"UCI HAR Dataset/test","y_test.txt"))
activityindexTrain <- fread(file.path(path, "UCI HAR Dataset/train", "y_train.txt"))
activityindexTest <- fread(file.path(path,"UCI HAR Dataset/test","y_test.txt"))
activitylabel <- fread(file.path(path,"UCI HAR Dataset/activity_labels.txt"))
dim(activitylabel)
activitylabel
subject <- rbind(subjectTrain, subjectTest)
names(subject) <- "subject"
activityindex <- rbind(activityindexTrain, activityindexTest)
names(activityindex) <- "index"
activity <- rbind(activityTrain, activityTest)
dt <- cbind(subject, activityindex, activity)
setkey(dt, subject, activityindex)
dim(activityindex)
dim(subject)
di(dt)
dim(dt)
dt <- cbind(subject, activityindex, activity)
dim(dt)
names(activityindex) <- "activityindex"
setkey(dt, subject, activityindex)
subject <- rbind(subjectTrain, subjectTest)
names(subject) <- "subject"
activityindex <- rbind(activityindexTrain, activityindexTest)
names(activityindex) <- "activityindex"
activity <- rbind(activityTrain, activityTest)
dim(activity)
dt <- cbind(subject, activityindex, activity)
dim(dt)
setkey(dt, subject, activityindex)
feature <- fread(file.path(path, "UCI HAR Dataset/", "features.txt"))
names(feature) <- c("num", "name")
subset <- feature[grepl("mean\\(\\)|std", name)]
subset$code <- subset[, paste0("V", num)]
selection <- c(key(dt), subset$code)
dtsub <- subset(dt, select=selection)
dim(dtsub)
activitylabel
names(activitylabel) <- c("index","name")
activitylabel
names(activitylabel) <- c("activityindex","name")
head(names(dtsub))
activitylabel
temp <- merge(dtsub,activitylabel,by="activityindex",all.x=TRUE)
dim(temp)
dt <- subset(dt, select=selection)
dim(dt)
dt <- merge(dt, activitylabel, by="activityindex", all.x=TRUE)
dim(dt)
dt <- cbind(subject, activityindex, activity)
setkey(dt, subject, activityindex)
dt <- subset(dt, select=selection)
dim(dt)
dt <- merge(dt, activitylabel, by="activityindex", all.x=TRUE)
dim(subset)
dim(dt)
head(dt[,1:5])
names(dt)
dt$name
levels(dt$name)
temp <- select(dt,name=="WALKING")
temp <- select(dt,name="WALKING")
temp <- select(dt,name%in%"WALKING")
temp <- select(dt, activityindex==1)
temp <- select(dt, activityindex=="1")
head(dt$activityindex)
as.numeric(dt$activityindex)
is.numeric(dt$activityindex)
temp <- select(dt, activityindex>4)
temp <- dt[dt$activityindex==1,]
dim(temp)
head(temp$name)
temp <- dt[dt$activityindex==3,]
head(temp$name)
names(activitylabel) <- c("activityindex","activityname")
dt <- cbind(subject, activityindex, activity)
setkey(dt, subject, activityindex)
selection <- c(key(dt), subset$code)
dt <- subset(dt, select=selection)
dt <- merge(dt, activitylabel, by="activityindex", all.x=TRUE)
names(activitylabel) <- c("activityindex","activityname")
names(dt)
setkey(dt, subject, activityindex, activityname)
temp <- dt[dt$subject==1,]
dim(temp)
temp <- dt[dt$subject==1&dt$activityindex==1,]
dim(temp)
temp <- dt[dt$subject==1&dt$activityindex==1,1:3]
temp
temp <- dt[dt$subject==1&dt$activityindex==1,]
dim(temp)
temp[,1:3]
temp[1:3]
fearture
feature
selection
subset
dim(setsut)
dim(subset)
names(dt)
library(reshape2)
install.packages("reshape2")
install.packages("reshape2")
library(reshape2)
names(dt)
temp <- melt(dt,id.vars=c(subject, activityindex, activityname))
temp <- melt(dt,id.vars=c("subject", "activityindex", "activityname"))
dim(temp)
head(temp)
dt[dt$subject==1&activityindex==1]$V1
dt[dt$subject==1&activityindex==1,]$V1
dtLong <- melt(dt,id.vars=c("subject", "activityindex", "activityname"))
dim(dtLong)
dim(subset)
head(subset)
feature <- fread(file.path(path, "UCI HAR Dataset/", "features.txt"))
names(feature) <- c("featurenum", "featurename")
?fread
install.packages("data.table")
library(data.table)
feature <- fread(file.path(path, "UCI HAR Dataset/", "features.txt"))
names(feature) <- c("featurenum", "featurename")
feature <- fread(file.path(path, "UCI HAR Dataset/", "features.txt"))
